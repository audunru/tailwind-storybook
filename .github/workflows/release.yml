name: Release
on:
  push:
    branches:
      - main # or main
  workflow_dispatch: # Add this line to enable manual triggering

concurrency:
  group: release
  cancel-in-progress: false

jobs:
  release:
    name: Release
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6
        with:
          token: ${{ secrets.RELEASE_PLEASE_TOKEN }}
          fetch-depth: 0
      - name: Release
        env:
          GITHUB_TOKEN: ${{ secrets.RELEASE_PLEASE_TOKEN }}
        run: |
          npx --yes \
            -p semantic-release \
            -p @semantic-release/changelog \
            -p @semantic-release/git \
            semantic-release
